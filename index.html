<!doctype html><meta charset="utf-8">
<title>マキシマム</title>
<style>
  body{font:16px/1.5 system-ui;margin:20px;background:#fff}
  #out{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:12px;margin-top:16px}
  .card{border:1px solid #ddd;border-radius:8px;overflow:hidden;background:#fafafa;cursor:pointer;position:relative}
  .card img{width:100%;display:block}
  .card h3{font-size:14px;margin:6px;line-height:1.3}
</style>

<p>キーワード: <input id=q value="添い寝ラジオ" size=20 readonly>
 件数:<input id=n type=number value=6 min=1 max=20>
 <button id=go>検索</button></p>

<div id=out></div>

<script>
const FIXED_KEY = "AIzaSyAxk1YpQSe-qDtFUSUmnjnduanag41Mlyk"; // ← 固定APIキー
const FIXED_QUERY = "添い寝ラジオ";                          // ← 固定検索ワード

async function run(){
  const q = FIXED_QUERY;
  const n = Math.min(20, Math.max(1, parseInt(nEl.value||"6",10)));

  // 表示も固定に戻す
  qEl.value = q;

  out.textContent = "読み込み中...";
  const u = new URL("https://www.googleapis.com/youtube/v3/search");
  u.search = new URLSearchParams({
    part: "snippet", q, order: "date", type: "video",
    maxResults: String(n), key: FIXED_KEY
  });

  try{
    const r  = await fetch(u);
    const js = await r.json().catch(()=> ({}));
    if(!r.ok){
      out.textContent = "取得失敗: " + (js?.error?.message || `${r.status} ${r.statusText}`);
      return;
    }
    if(!js.items?.length){ out.textContent = "動画なし"; return; }

    out.innerHTML = "";
    js.items.forEach(v=>{
      const id=v.id.videoId, sn=v.snippet;
      const card=document.createElement("div");
      card.className="card";
      card.innerHTML=`<img src="${sn.thumbnails.medium.url}" alt=""><h3>${sn.title}</h3>`;
      card.onclick=()=>{
        card.innerHTML=`<iframe width="100%" height="200"
          src="https://www.youtube.com/embed/${id}?autoplay=1"
          frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>`;
      };
      out.appendChild(card);
    });
  }catch(e){
    out.textContent = "取得失敗: " + e.message;
  }
}

const qEl = document.getElementById("q");
const nEl = document.getElementById("n");
const out = document.getElementById("out");

document.getElementById("go").onclick = run;
</script>
