<!doctype html>
<meta charset="utf-8">
<title>マキシマム</title>

<style>
  body{font:16px/1.5 system-ui;margin:20px;background:#fff}
  #out{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:12px;margin-top:16px}
  .card{border:1px solid #ddd;border-radius:8px;overflow:hidden;background:#fafafa;cursor:pointer}
  .card img{width:100%;display:block}
  .card h3{font-size:14px;margin:6px;line-height:1.3}
</style>

<p>
  キーワード: <input value="添い寝ラジオ" readonly>
  <button id="go">検索</button>
</p>

<div id="out"></div>

<script>
const FIXED_KEY = "AIzaSyAxk1YpQSe-qDtFUSUmnjnduanag41Mlyk";
const FIXED_QUERY = "添い寝ラジオ";
const FIXED_COUNT = 10; // ← ここで完全固定

async function run(){
  out.textContent = "読み込み中...";

  const u = new URL("https://www.googleapis.com/youtube/v3/search");
  u.search = new URLSearchParams({
    part: "snippet",
    q: FIXED_QUERY,
    order: "date",
    type: "video",
    maxResults: String(FIXED_COUNT),
    key: FIXED_KEY
  });

  try{
    const r  = await fetch(u);
    const js = await r.json();
    if(!r.ok){
      out.textContent = "取得失敗";
      return;
    }

    out.innerHTML = "";
    js.items.forEach(v=>{
      const id=v.id.videoId, sn=v.snippet;
      const card=document.createElement("div");
      card.className="card";
      card.innerHTML=`<img src="${sn.thumbnails.medium.url}">
                      <h3>${sn.title}</h3>`;
      card.onclick=()=>{
        card.innerHTML=`<iframe width="100%" height="200"
          src="https://www.youtube.com/embed/${id}?autoplay=1"
          frameborder="0"
          allow="autoplay; encrypted-media"
          allowfullscreen></iframe>`;
      };
      out.appendChild(card);
    });

  }catch(e){
    out.textContent = "取得失敗";
  }
}

document.getElementById("go").onclick = run;
</script>
